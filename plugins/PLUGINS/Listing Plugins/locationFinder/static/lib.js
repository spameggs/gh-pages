var lfHandler=function(e){if(e.markers[0]){e.markers[0].setDraggable(!0);var t=new google.maps.InfoWindow({content:lfConfig.phrase_drag_hint,maxWidth:120});lfConfig.postZoom?lfUse(e):t.open(e.map,e.markers[0]),google.maps.event.addListener(e.markers[0],"dragstart",function(){t.close()}),google.maps.event.addListener(e.markers[0],"dragend",function(){lfUpdate(e),$("#lf_use").attr("checked",!0)}),google.maps.event.addListener(e.map,"zoom_changed",function(){lfUpdate(e)}),lfUpdate(e),$("#lf_use").change(function(){t.close(),lfUse(e)}),$("#lf_search").click(function(){lfSearch(e)}),$("#lf_query").keydown(function(t){13==t.keyCode&&(lfSearch(e),$(this).closest("form").attr("onsubmit","return false;"))}),$("#lf_query").blur(function(){$(this).closest("form").attr("onsubmit","return true;")})}},lfSearch=function(e){var t=$("#lf_query").val();t&&lfConfig.geoCoder.geocode({address:t},function(n,a){if("OK"==a){var i=n[0].geometry.location.lat(),o=n[0].geometry.location.lng(),s=new google.maps.LatLng(i,o);e.markers[0].setPosition(s),e.map.setCenter(s),lfUpdate(e)}else printMessage("warning",lfConfig.phrase_not_found.replace("{location}",t))})},lfUpdate=function(e){var t=e.map.getZoom(),n=e.markers[0].getPosition().lat(),a=e.markers[0].getPosition().lng();$("#lf_zoom").val(t),$("#lf_lat").val(n),$("#lf_lng").val(a)},lfUse=function(e){e.markers[0].setVisible($("#lf_use").is(":checked"))};